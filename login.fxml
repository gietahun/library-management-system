<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="loginRoot" xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="application.LoginController"
            stylesheets="@login-style.css">

    <!-- âœ… Wrap center in ScrollPane to guarantee visibility -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true"
                    hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox alignment="TOP_CENTER" spacing="22" styleClass="login-container">
                <padding>
                    <!-- â¬‡ï¸ Reduced top padding for compact layout -->
                    <Insets top="20" bottom="20" left="40" right="40"/>
                </padding>

                <!-- Logo / Icon -->
                <HBox alignment="CENTER" style="-fx-padding: 0 0 8 0;">
                    <ImageView fitHeight="60" fitWidth="60" preserveRatio="true">
                        <image>
                            <Image url="@images/book-icon.png"/>
                        </image>
                    </ImageView>
                </HBox>

                <!-- Welcome Title -->
                <VBox alignment="CENTER" spacing="4">
                    <Label text="ðŸ“š Online Library" styleClass="app-title"/>
                    <Label text="Sign in to continue" styleClass="subtitle"/>
                </VBox>

                <!-- Login Form -->
                <VBox alignment="CENTER" spacing="16" styleClass="login-box">
                    <!-- Username -->
                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ‘¤" styleClass="icon-label"/>
                            <Label text="Username" styleClass="field-label"/>
                        </HBox>
                        <TextField fx:id="usernameField" promptText="e.g., admin"
                                   styleClass="input-field"/>
                    </VBox>

                    <!-- Password -->
                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ”’" styleClass="icon-label"/>
                            <Label text="Password" styleClass="field-label"/>
                        </HBox>
                        <PasswordField fx:id="passwordField" promptText="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                       styleClass="input-field"/>
                    </VBox>

                    <!-- Role Selection -->
                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ‘¤" styleClass="icon-label"/>
                            <Label text="Login As" styleClass="field-label"/>
                        </HBox>
                         <javafx.scene.control.ComboBox fx:id="roleSelector" prefWidth="300" styleClass="input-field"/>
                    </VBox>

                    <!-- Login Button -->
                    <Button fx:id="loginBtn" onAction="#handleLogin"
                            styleClass="btn-login"
                            text="â–¶ï¸ Sign In"/>
                </VBox>

                <!-- Footer Links -->
                <VBox spacing="10" alignment="CENTER" style="-fx-padding: 15 0 0 0;">
                    <!-- Back to Home -->
                    <HBox alignment="CENTER">
                        <Button fx:id="backBtn" onAction="#goBack"
                                styleClass="btn-back"
                                text="ðŸ¡ Back to Home"/>
                    </HBox>

                    <!-- Sign Up Link -->
                    <HBox alignment="CENTER">
                        <Label text="Donâ€™t have an account? " style="-fx-text-fill: #666; -fx-font-size: 13px;"/>
                        <Label text="Sign up" style="-fx-text-fill: #27ae60; -fx-font-weight: bold; -fx-underline: true; -fx-font-size: 13px;"
                               onMouseClicked="#goToSignup" fx:id="signupLink"/>
                    </HBox>

                    <!-- Copyright -->
                    <HBox alignment="CENTER" style="-fx-padding: 8 0 0 0;">
                        <Label text="Â© 2025 Library Management" style="-fx-text-fill: #888; -fx-font-size: 12px;"/>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>