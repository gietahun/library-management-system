<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="signupRoot" xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="application.SignupController"
            stylesheets="@signup-style.css">

    <!-- âœ… Wrap center in ScrollPane to prevent cutoff -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" 
                    hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox alignment="TOP_CENTER" spacing="18" styleClass="signup-container">
                <padding>
                    <Insets top="20" bottom="20" left="40" right="40"/>
                </padding>

                <!-- Logo -->
                <HBox alignment="CENTER" style="-fx-padding: 0 0 8 0;">
                    <ImageView fitHeight="60" fitWidth="60" preserveRatio="true">
                        <image>
                            <Image url="@images/book-icon.png"/>
                        </image>
                    </ImageView>
                </HBox>

                <!-- Title -->
                <VBox alignment="CENTER" spacing="4">
                    <Label text="ðŸ“š Join the Library" styleClass="app-title"/>
                    <Label text="Create your free account" styleClass="subtitle"/>
                </VBox>

                <!-- Form -->
                <VBox alignment="CENTER" spacing="16" styleClass="signup-box">
                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ§‘" styleClass="icon-label"/>
                            <Label text="First Name" styleClass="field-label"/>
                        </HBox>
                        <TextField fx:id="fname" promptText="e.g., John" styleClass="input-field" prefWidth="300"/>
                    </VBox>

                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ§‘" styleClass="icon-label"/>
                            <Label text="Last Name" styleClass="field-label"/>
                        </HBox>
                        <TextField fx:id="lname" promptText="e.g., Doe" styleClass="input-field" prefWidth="300"/>
                    </VBox>

                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ†”" styleClass="icon-label"/>
                            <Label text="Username" styleClass="field-label"/>
                        </HBox>
                        <TextField fx:id="username" promptText="e.g., johndoe123" styleClass="input-field" prefWidth="300"/>
                    </VBox>

                    <VBox spacing="6" styleClass="input-group">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ”" styleClass="icon-label"/>
                            <Label text="Password" styleClass="field-label"/>
                        </HBox>
                        <PasswordField fx:id="password" promptText="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" styleClass="input-field" prefWidth="300"/>
                    </VBox>

                    <VBox spacing="6" styleClass="input-group">
                         <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ‘¤" styleClass="icon-label"/>
                            <Label text="Role" styleClass="field-label"/>
                         </HBox>
                         <javafx.scene.control.ComboBox fx:id="roleSelector" prefWidth="300" styleClass="input-field"/>
                    </VBox>

                    <Button fx:id="signupBtn" onAction="#handleSignup" styleClass="btn-signup" text="âœ¨ Create Account"/>
                </VBox>

                <!-- Footer links â€” now guaranteed visible -->
                <VBox spacing="10" alignment="CENTER" style="-fx-padding: 15 0 0 0;">
                    <HBox alignment="CENTER">
                        <Button fx:id="backBtn" onAction="#goBack" styleClass="btn-back" text="ðŸ¡ Back to Home"/>
                    </HBox>

                    <HBox alignment="CENTER">
                        <Label text="Already have an account? " style="-fx-text-fill: #666; -fx-font-size: 13px;"/>
                        <Label text="Sign in" style="-fx-text-fill: #9b59b6; -fx-font-weight: bold; -fx-underline: true; -fx-font-size: 13px;"
                               onMouseClicked="#goToLogin" fx:id="loginLink"/>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>